import{d as h,i as w,j as x,k,r as y,l as L,m as b,n as C,w as a,p as O,e as t,b as l,a as r,f as i,c,g as v,q as I}from"./index.js";import{_ as N}from"./CenteredContainer.js";import{_ as S}from"./FormCard.js";const E={href:"#",class:"flex items-center mb-6 text-2xl font-semibold text-gray-900 dark:text-white"},R=["src"],$=["onClick"],B={key:0},A={key:1},G={key:2},q=h({__name:"login",setup(P){const{getLogoUrl:_}=I(),{isLoggedIn:p}=w(),u=x("erp"),e=k("inext__isLogging","no"),d=y(null);L(()=>{p&&(e.value=null,window.location.href="/")}),b(e,(o,n)=>{n=="pending"&&o=="done"&&(e.value=null,window.location.href="/")});const g=async()=>{e.value="pending",u.get("login",{params:{redirect_uri:"//auth/callback"}}).then(({data:o})=>{const{errors:n,data:s}=o;n.length==0?d.value=window.open(decodeURI(s.auth_url)):console.log(n)},o=>console.log(o))};return(o,n)=>{const s=S,m=N,f=O;return t(),C(f,null,{default:a(()=>[l(m,null,{default:a(()=>[r("a",E,[r("img",{class:"h-8 mr-2",src:i(_)(),alt:"logo",title:"Logo"},null,8,R)]),l(s,null,{default:a(()=>[r("button",{onClick:v(g,["prevent"]),class:"w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"},[i(e)=="no"?(t(),c("span",B," SSO LOGIN ")):i(e)=="pending"?(t(),c("span",A,"LOGIN IN CORSO ...")):(t(),c("span",G,"ERRORE LOGIN"))],8,$)]),_:1})]),_:1})]),_:1})}}});export{q as default};
