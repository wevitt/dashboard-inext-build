import{d as O,i as I,j as N,k as U,r as R,l as E,m as V,n as $,p as A,q as B,w as n,s as T,e as s,b as d,a as e,f as o,c as i,t as u,v as g,h as p,g as f,F as q,C as F,x as G}from"./index.js";import{_ as P}from"./CenteredContainer.js";import{_ as j}from"./FormCard.js";const z={href:"#",class:"flex items-center mb-6 text-2xl font-semibold text-gray-900 dark:text-white"},D=["src"],M=["onClick"],W={key:0},H={key:1},J={key:2},K=e("h1",{class:"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"}," Accedi al tuo account ",-1),Q=["onSubmit"],X=e("label",{for:"email",class:"text-left block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Username/indirizzo email",-1),Y=e("label",{for:"password",class:"text-left block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Password",-1),Z={class:"flex items-center justify-between"},ee=e("div",{class:"flex items-start"},[e("div",{class:"flex items-center h-5"},[e("input",{id:"remember","aria-describedby":"remember",type:"checkbox",class:"w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-primary-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-primary-600 dark:ring-offset-gray-800"})]),e("div",{class:"ml-3 text-sm"},[e("label",{for:"remember",class:"text-gray-500 dark:text-gray-300"},"Remember me")])],-1),te=!1,ie=O({__name:"login",setup(oe){const{getLogoUrl:_}=G(),{isLoggedIn:b,setUser:y,setToken:x}=I(),k=N("erp"),t=U("inext__isLogging","no"),l=R({email:"",password:""}),h=E(null);V(()=>{b&&(t.value=null,window.location.href="/")}),$(t,(a,r)=>{r=="pending"&&a=="done"&&(t.value=null,window.location.href="/")});const w=async()=>{t.value="pending",k.get("login",{params:{redirect_uri:"//auth/callback"}}).then(({data:a})=>{const{errors:r,data:c}=a;r.length==0?h.value=window.open(decodeURI(c.auth_url)):console.log(r)},a=>console.log(a))},v=()=>{t.value="pending",setTimeout(()=>{x("demotoken"),y({cognome:"Utente",nome:"Demo",id:1,email:"demo@inext.com",status:1,telefono:"",tenants:[],username:"utente.demo"}),t.value="done"},300)};return(a,r)=>{const c=A("router-link"),L=j,C=P,S=T;return s(),B(S,null,{default:n(()=>[d(C,null,{default:n(()=>[e("a",z,[e("img",{class:"h-8 mr-2",src:o(_)(),alt:"logo",title:"Logo"},null,8,D)]),d(L,null,{default:n(()=>[te?(s(),i("button",{key:0,onClick:f(w,["prevent"]),class:"w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"},[o(t)=="no"?(s(),i("span",W," SSO LOGIN ")):o(t)=="pending"?(s(),i("span",H,"LOGIN IN CORSO ...")):(s(),i("span",J,"ERRORE LOGIN"))],8,M)):(s(),i(q,{key:1},[K,e("form",{class:"space-y-4 md:space-y-6",action:"#",onSubmit:f(v,["prevent"])},[e("div",null,[X,u(e("input",{"onUpdate:modelValue":r[0]||(r[0]=m=>o(l).email=m),type:"email",autocomplete:"username",name:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@company.com",required:""},null,512),[[g,o(l).email]])]),e("div",null,[Y,u(e("input",{"onUpdate:modelValue":r[1]||(r[1]=m=>o(l).password=m),type:"password",autocomplete:"current-password",name:"password",id:"password",placeholder:"••••••••",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[g,o(l).password]])]),e("div",Z,[ee,d(c,{to:"/auth/forgotpassword",class:"text-sm font-medium text-primary-600 hover:underline dark:text-primary-500"},{default:n(()=>[p("password dimenticata?")]),_:1})]),d(o(F),{loading:o(t)=="pending",disabled:o(t)=="pending",class:"w-full text-center"},{default:n(()=>[p(" Log In ")]),_:1},8,["loading","disabled"])],40,Q)],64))]),_:1})]),_:1})]),_:1})}}});export{ie as default};
